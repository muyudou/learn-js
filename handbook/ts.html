<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>ts小册总结 | Hello FE</title>
    <meta name="generator" content="VuePress 1.9.10">
    
    <meta name="description" content="Just playing around">
    
    <link rel="preload" href="/learn-js/assets/css/0.styles.1a3858a9.css" as="style"><link rel="preload" href="/learn-js/assets/js/app.4d00eb80.js" as="script"><link rel="preload" href="/learn-js/assets/js/7.7c04b33d.js" as="script"><link rel="preload" href="/learn-js/assets/js/2.0a9283b3.js" as="script"><link rel="preload" href="/learn-js/assets/js/1.9a3fba6f.js" as="script"><link rel="preload" href="/learn-js/assets/js/40.3006ef82.js" as="script"><link rel="prefetch" href="/learn-js/assets/js/10.dfb0299a.js"><link rel="prefetch" href="/learn-js/assets/js/11.479e3941.js"><link rel="prefetch" href="/learn-js/assets/js/14.1d352c7e.js"><link rel="prefetch" href="/learn-js/assets/js/15.88019e21.js"><link rel="prefetch" href="/learn-js/assets/js/16.b16a71dc.js"><link rel="prefetch" href="/learn-js/assets/js/17.0a7404ee.js"><link rel="prefetch" href="/learn-js/assets/js/18.ea1a9e80.js"><link rel="prefetch" href="/learn-js/assets/js/19.3c792fed.js"><link rel="prefetch" href="/learn-js/assets/js/20.2f5e9fbb.js"><link rel="prefetch" href="/learn-js/assets/js/21.6040652a.js"><link rel="prefetch" href="/learn-js/assets/js/22.68139099.js"><link rel="prefetch" href="/learn-js/assets/js/23.dff1794b.js"><link rel="prefetch" href="/learn-js/assets/js/24.18ff6974.js"><link rel="prefetch" href="/learn-js/assets/js/25.da366b76.js"><link rel="prefetch" href="/learn-js/assets/js/26.62212fb5.js"><link rel="prefetch" href="/learn-js/assets/js/27.1417e115.js"><link rel="prefetch" href="/learn-js/assets/js/28.8f61babf.js"><link rel="prefetch" href="/learn-js/assets/js/29.47176a81.js"><link rel="prefetch" href="/learn-js/assets/js/3.b517b5f6.js"><link rel="prefetch" href="/learn-js/assets/js/30.693811dd.js"><link rel="prefetch" href="/learn-js/assets/js/31.8e410bcb.js"><link rel="prefetch" href="/learn-js/assets/js/32.67c6bce2.js"><link rel="prefetch" href="/learn-js/assets/js/33.7dc5c153.js"><link rel="prefetch" href="/learn-js/assets/js/34.380ce34c.js"><link rel="prefetch" href="/learn-js/assets/js/35.b5fcd8bd.js"><link rel="prefetch" href="/learn-js/assets/js/36.34421d06.js"><link rel="prefetch" href="/learn-js/assets/js/37.d64318d3.js"><link rel="prefetch" href="/learn-js/assets/js/38.b6f07431.js"><link rel="prefetch" href="/learn-js/assets/js/39.25da8c3e.js"><link rel="prefetch" href="/learn-js/assets/js/4.b745fea2.js"><link rel="prefetch" href="/learn-js/assets/js/41.9b72875a.js"><link rel="prefetch" href="/learn-js/assets/js/5.fe07291b.js"><link rel="prefetch" href="/learn-js/assets/js/6.79fe6008.js"><link rel="prefetch" href="/learn-js/assets/js/8.35de75a7.js"><link rel="prefetch" href="/learn-js/assets/js/9.c86f0e2c.js"><link rel="prefetch" href="/learn-js/assets/js/vendors~docsearch.86fb114e.js">
    <link rel="stylesheet" href="/learn-js/assets/css/0.styles.1a3858a9.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container" data-v-7dd95ae2><div data-v-7dd95ae2><div class="password-shadow password-wrapper-out" style="display:none;" data-v-59e6cb88 data-v-7dd95ae2 data-v-7dd95ae2><h3 class="title" data-v-59e6cb88>Hello FE</h3> <p class="description" data-v-59e6cb88>Just playing around</p> <label id="box" class="inputBox" data-v-59e6cb88><input type="password" value="" data-v-59e6cb88> <span data-v-59e6cb88>Konck! Knock!</span> <button data-v-59e6cb88>OK</button></label> <div class="footer" data-v-59e6cb88><span data-v-59e6cb88><i class="iconfont reco-theme" data-v-59e6cb88></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-59e6cb88>vuePress-theme-reco</a></span> <span data-v-59e6cb88><i class="iconfont reco-copyright" data-v-59e6cb88></i> <a data-v-59e6cb88><!---->
          
        <!---->
        2023
      </a></span></div></div> <div class="hide" data-v-7dd95ae2><header class="navbar" data-v-7dd95ae2><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/learn-js/" class="home-link router-link-active"><!----> <span class="site-name">Hello FE</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/learn-js/" class="nav-link"><i class="undefined"></i>
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      muyudou的 总结
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/mqyqingfeng" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://juejin.cn/user/712139234359182/posts" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  掘金
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-7dd95ae2></div> <aside class="sidebar" data-v-7dd95ae2><div class="personal-info-wrapper" data-v-1fad0c41 data-v-7dd95ae2><!----> <!----> <div class="num" data-v-1fad0c41><div data-v-1fad0c41><h3 data-v-1fad0c41>4</h3> <h6 data-v-1fad0c41>文章</h6></div> <div data-v-1fad0c41><h3 data-v-1fad0c41>0</h3> <h6 data-v-1fad0c41>标签</h6></div></div> <ul class="social-links" data-v-1fad0c41></ul> <hr data-v-1fad0c41></div> <nav class="nav-links"><div class="nav-item"><a href="/learn-js/" class="nav-link"><i class="undefined"></i>
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      muyudou的 总结
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/mqyqingfeng" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://juejin.cn/user/712139234359182/posts" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  掘金
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav> <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><a href="/learn-js/" class="sidebar-heading clickable router-link-active"><span>欢迎学习</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/learn-js/" aria-current="page" class="sidebar-link">学前必读</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/learn-js/handbook/ts" class="sidebar-heading clickable open active"><span>基础学习</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/learn-js/handbook/ts.html" aria-current="page" class="active sidebar-link">ts小册总结</a></li><li><a href="/learn-js/handbook/webpack.html" class="sidebar-link">从4个方面重新梳理webpack</a></li><li><a href="/learn-js/handbook/table.html" class="sidebar-link">vtable高度自适应方案.md</a></li></ul></section></li></ul> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-59e6cb88 data-v-7dd95ae2><h3 class="title" data-v-59e6cb88>ts小册总结</h3> <!----> <label id="box" class="inputBox" data-v-59e6cb88><input type="password" value="" data-v-59e6cb88> <span data-v-59e6cb88>Konck! Knock!</span> <button data-v-59e6cb88>OK</button></label> <div class="footer" data-v-59e6cb88><span data-v-59e6cb88><i class="iconfont reco-theme" data-v-59e6cb88></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-59e6cb88>vuePress-theme-reco</a></span> <span data-v-59e6cb88><i class="iconfont reco-copyright" data-v-59e6cb88></i> <a data-v-59e6cb88><!---->
          
        <!---->
        2023
      </a></span></div></div> <div data-v-7dd95ae2><div data-v-7dd95ae2><main class="page"><section style="display:;"><div class="page-title"><h1 class="title">ts小册总结</h1> <div data-v-8a445198><i class="iconfont reco-account" data-v-8a445198><span data-v-8a445198>muyudou</span></i> <i class="iconfont reco-date" data-v-8a445198><span data-v-8a445198>2023/10/30</span></i> <!----> <!----></div></div> <div class="theme-reco-content content__default"><h1 id="背景"><a href="#背景" class="header-anchor">#</a> 背景</h1> <p>记得有一次面试字节（我发现字节挺喜欢考ts的），出了ts的类型编程，当然了没写出来，就没下文了。。。所以一直耿耿于怀，心里就埋下了个疙瘩，想的还是需要把这部分攻克一下，因此开始了ts小册的学习，买了2本小册，准备啃一啃，啃了2本发现神光的<a href="https://juejin.cn/book/7047524421182947366/section" target="_blank" rel="noopener noreferrer">TypeScript 类型体操通关秘籍<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>小册总结的类型体操还是不错的，适合入门。所以痛下决心（逼不得已）总结一下。总结前先把ts面试题发下：</p> <ol><li>Pick实现、Partial实现</li></ol> <p>这个挺基础的，但是确实不会，遂挂了。</p> <ol start="2"><li>补充以下类型，提示出来对象的key</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">a</span><span class="token punctuation">(</span><span class="token parameter">o<span class="token punctuation">,</span>key</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> o<span class="token punctuation">[</span>key<span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>这个题目约束key是o的属性，不是的话可以报错，还是有用的，关键要加范型。</p> <p>同志们，会吗？如果你实际项目中用到了ts，这些基础的ts类型编程还是值得掌握一下的。不会的话就去复习吧，否则这个问题你就挂了。</p> <p><strong>答案</strong></p> <div class="language-js extra-class"><pre class="language-js"><code>type myPick<span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name">Record</span><span class="token operator">&lt;</span>string<span class="token punctuation">,</span> any<span class="token operator">&gt;</span><span class="token punctuation">,</span> <span class="token constant">K</span> <span class="token keyword">extends</span> <span class="token class-name">keyof</span> <span class="token constant">T</span><span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token punctuation">[</span><span class="token constant">P</span> <span class="token keyword">in</span> <span class="token constant">K</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">P</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>

type myPartial<span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name">Record</span><span class="token operator">&lt;</span>string<span class="token punctuation">,</span> any<span class="token operator">&gt;&gt;</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token punctuation">[</span><span class="token constant">P</span> <span class="token keyword">in</span> <span class="token constant">T</span><span class="token punctuation">]</span><span class="token operator">?</span><span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">P</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> a<span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name">object</span><span class="token punctuation">,</span> <span class="token constant">K</span> <span class="token keyword">extends</span> <span class="token class-name">keyof</span> <span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>o<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">,</span> <span class="token literal-property property">key</span><span class="token operator">:</span> <span class="token constant">K</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> o<span class="token punctuation">[</span>key<span class="token punctuation">]</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> obja <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">a</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token literal-property property">b</span><span class="token operator">:</span><span class="token number">2</span>
<span class="token punctuation">}</span>

<span class="token function">a</span><span class="token punctuation">(</span>obja<span class="token punctuation">,</span> <span class="token string">'a'</span><span class="token punctuation">)</span>
<span class="token function">a</span><span class="token punctuation">(</span>obja<span class="token punctuation">,</span> <span class="token string">'d'</span><span class="token punctuation">)</span> <span class="token comment">// ts报错：类型“&quot;d&quot;”的参数不能赋给类型“&quot;a&quot; | &quot;b&quot;”的参数。</span>

</code></pre></div><p>学了这个小册后，我的感受是不要求把所有的体操类型都掌握（学习过程太折磨了，产生了人生怀疑🤨），但是内置的高级类型的写法还是值得掌握的，对于应付面试是差不多了。如果需要对库进行ts类型编写的的话，可以好好啃啃高级写法。</p> <p>剩下内容主要是小册总结，这个类型编程上手成本有点高，之前写项目也用ts，但是我最多用个record和partial高级类型，其他的基本是inferface加enum，类型编程统统没用到。</p> <p>所以这个小册反反复复看几遍后差不多有点感觉，能写出来点了，好像入门了。其实现在觉得ts这部分实在是不友好，为了写类型学这么多奇奇怪怪的东西，成本是高的，所以是不是有点理解为啥有的框架从ts换成了jsdoc？</p> <h1 id="一、基础类型"><a href="#一、基础类型" class="header-anchor">#</a> 一、基础类型</h1> <p>先了解下ts中的基础类型，基本是从js中搬过来，然后又加了元组（Tuple）、接口（Interface）、枚举（Enum），这部分没什么难度，我们用ts这部分用的最多。</p> <table><thead><tr><th>类型</th> <th>具体</th></tr></thead> <tbody><tr><td>和js一样的基础类型8个</td> <td>number、boolean、string、object、bigint、symbol、undefined、null</td></tr> <tr><td>基础类型对应的包装类型5个</td> <td>Number、Boolean、String、Object、Symbol</td></tr> <tr><td>与js一样的复合类型</td> <td>class、Array</td></tr> <tr><td>特有的复合类型</td> <td>元组（Tuple）、接口（Interface）、枚举（Enum）</td></tr></tbody></table> <h2 id="接口"><a href="#接口" class="header-anchor">#</a> 接口</h2> <h3 id="函数的两种声明方式"><a href="#函数的两种声明方式" class="header-anchor">#</a> 函数的两种声明方式</h3> <ol><li>接口interface</li> <li>直接写在函数声明上</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">interface</span> <span class="token class-name">SayHello</span> <span class="token punctuation">{</span>
    <span class="token punctuation">(</span>name<span class="token operator">:</span> string<span class="token punctuation">)</span><span class="token operator">:</span> string<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> <span class="token literal-property property">func</span><span class="token operator">:</span> <span class="token function-variable function">SayHello</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">name</span><span class="token operator">:</span> string</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">'hello, '</span> <span class="token operator">+</span> name<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="构造函数声明"><a href="#构造函数声明" class="header-anchor">#</a> 构造函数声明</h3> <p>相对于普通函数多了个new</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">interface</span> <span class="token class-name">PersonConstructor</span> <span class="token punctuation">{</span>
    <span class="token keyword">new</span> <span class="token punctuation">(</span>name<span class="token operator">:</span> string<span class="token punctuation">,</span> <span class="token literal-property property">age</span><span class="token operator">:</span> number<span class="token punctuation">)</span><span class="token operator">:</span> IPerson<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">createPerson</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">ctor</span><span class="token operator">:</span> PersonConstructor</span><span class="token punctuation">)</span><span class="token operator">:</span> IPerson <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">ctor</span><span class="token punctuation">(</span><span class="token string">'guang'</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>对象类型、class 类型在 TypeScript 里也叫做索引类型，也就是索引了多个元素的类型的意思。对象可以动态添加属性，如果不知道会有什么属性，可以用可索引签名：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">interface</span> <span class="token class-name">IPerson</span> <span class="token punctuation">{</span>
    <span class="token punctuation">[</span>prop<span class="token operator">:</span> string<span class="token punctuation">]</span><span class="token operator">:</span> string <span class="token operator">|</span> number<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> <span class="token literal-property property">obj</span><span class="token operator">:</span> IPerson <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
obj<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'xu'</span>
</code></pre></div><h4 id="特殊类型"><a href="#特殊类型" class="header-anchor">#</a> 特殊类型</h4> <ol><li>never：代表不可达，函数抛出异常的时候，返回值就是never</li> <li>void：代表空，可以是undefined 或never</li> <li>any：任意类型。任何类型都可以赋值给它，它也可以赋值给任何类型</li> <li>unknown：未知类型，任何类型都可以赋值给它，<strong>但是它不能赋值给任何其他类型</strong></li></ol> <h1 id="二、类型操作"><a href="#二、类型操作" class="header-anchor">#</a> 二、类型操作</h1> <p>这部分就涉及到类型编程了，下面几个基础的操作要掌握一下：</p> <ol><li>条件 extends?:</li></ol> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">res</span> <span class="token operator">=</span> <span class="token number">1</span> <span class="token keyword">extends</span> <span class="token number">2</span> <span class="token operator">?</span> <span class="token boolean">true</span> <span class="token operator">:</span> <span class="token boolean">false</span>
</code></pre></div><ol start="2"><li>推导： infer</li></ol> <div class="language-js extra-class"><pre class="language-js"><code>type First<span class="token operator">&lt;</span>Tuple <span class="token keyword">extends</span> <span class="token class-name">unknown</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> <span class="token operator">=</span> Tuple <span class="token keyword">extends</span> <span class="token punctuation">[</span>infer <span class="token constant">T</span><span class="token punctuation">,</span> <span class="token operator">...</span>infer <span class="token constant">R</span><span class="token punctuation">]</span> <span class="token operator">?</span> <span class="token constant">T</span> <span class="token operator">:</span> never<span class="token punctuation">;</span>

type res <span class="token operator">=</span> First<span class="token operator">&lt;</span><span class="token punctuation">[</span><span class="token string">'1'</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token operator">&gt;</span>
</code></pre></div><ol start="3"><li>联合： ｜</li> <li>交叉： &amp;</li></ol> <p>同一类型可以合并，不同类型不能合并：</p> <p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e2fc2868c32b4159966f2fda72251f5b~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=396&amp;h=110&amp;s=29184&amp;e=png&amp;b=f8f7f7" alt="image.png"></p> <ol start="5"><li>映射类型</li></ol> <p>这个用到的还是很多的，一定要掌握。</p> <div class="language-js extra-class"><pre class="language-js"><code>type MapType<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token punctuation">[</span>Key <span class="token keyword">in</span> keyof <span class="token constant">T</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token constant">T</span><span class="token punctuation">[</span>Key<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token constant">T</span><span class="token punctuation">[</span>Key<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token constant">T</span><span class="token punctuation">[</span>Key<span class="token punctuation">]</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>

type res2 <span class="token operator">=</span> MapType<span class="token operator">&lt;</span><span class="token punctuation">{</span><span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token literal-property property">b</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">}</span><span class="token operator">&gt;</span> 

</code></pre></div><p>索引重映射: 关键是as</p> <p>keyof T取出的索引类型是string | number | symbol 的联合类型，和 string 取交叉部分就只剩下 string 了。交叉类型把同类型合并，不同的舍弃。</p> <div class="language-js extra-class"><pre class="language-js"><code>type MapType2<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token punctuation">[</span>Key <span class="token keyword">in</span> keyof <span class="token constant">T</span> <span class="token keyword">as</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>Key <span class="token operator">&amp;</span> string<span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>Key <span class="token operator">&amp;</span> string<span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>Key <span class="token operator">&amp;</span> string<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token constant">T</span><span class="token punctuation">[</span>Key<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token constant">T</span><span class="token punctuation">[</span>Key<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token constant">T</span><span class="token punctuation">[</span>Key<span class="token punctuation">]</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>

type res3 <span class="token operator">=</span> MapType2<span class="token operator">&lt;</span><span class="token punctuation">{</span><span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token literal-property property">b</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">}</span><span class="token operator">&gt;</span> 
</code></pre></div><h1 id="三、类型编程"><a href="#三、类型编程" class="header-anchor">#</a> 三、类型编程</h1> <p>下面就进入类型编程部分，这部分看了有3遍，才模模糊糊的自己能写出来一些，如果不想看的话可以看最后内置高级类型，这个还是很重要的，需要掌握啊，同志们。</p> <p>这部分小册还总结了顺口令，分了6个部分来写。</p> <p><strong>类型体操顺口溜</strong></p> <p><strong>模式匹配做提取，重新构造做变换。</strong></p> <p><strong>递归复用做循环，数组长度做计数。</strong></p> <p><strong>联合分散可简化，特殊特性要记清。</strong></p> <p><strong>基础扎实套路熟，类型体操可通关。</strong></p> <p>按照这个来刷，确实还是有用的，想学习类型体操的可以刷一刷。</p> <h2 id="_1-模式匹配做提取-infer"><a href="#_1-模式匹配做提取-infer" class="header-anchor">#</a> 1. 模式匹配做提取 infer</h2> <p>主要是用infer来匹配参数</p> <h3 id="数组相关操作"><a href="#数组相关操作" class="header-anchor">#</a> 数组相关操作</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 获取第一个元素</span>
type GetFirst<span class="token operator">&lt;</span>Arr <span class="token keyword">extends</span> <span class="token class-name">unknown</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> <span class="token operator">=</span> 
    Arr <span class="token keyword">extends</span> <span class="token punctuation">[</span>infer First<span class="token punctuation">,</span> <span class="token operator">...</span>unknown<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">?</span> First <span class="token operator">:</span> never<span class="token punctuation">;</span>
type res <span class="token operator">=</span> GetFirst<span class="token operator">&lt;</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token operator">&gt;</span>

<span class="token comment">// 获取最后一个元素</span>
type GetLast<span class="token operator">&lt;</span>Arr <span class="token keyword">extends</span> <span class="token class-name">unknown</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> <span class="token operator">=</span>
    Arr <span class="token keyword">extends</span> <span class="token punctuation">[</span><span class="token operator">...</span>unknown<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> infer Last<span class="token punctuation">]</span> <span class="token operator">?</span> Last <span class="token operator">:</span> never<span class="token punctuation">;</span>
type res2 <span class="token operator">=</span> GetLast<span class="token operator">&lt;</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token operator">&gt;</span>

<span class="token comment">// 去除最后一个元素后构造数组</span>
type PopArr<span class="token operator">&lt;</span>Arr <span class="token keyword">extends</span> <span class="token class-name">unknown</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> <span class="token operator">=</span>
    Arr <span class="token keyword">extends</span> <span class="token punctuation">[</span><span class="token operator">...</span>infer newArr<span class="token punctuation">,</span> unknown<span class="token punctuation">]</span> <span class="token operator">?</span> newArr <span class="token operator">:</span> never<span class="token punctuation">;</span>
type res4 <span class="token operator">=</span> PopArr<span class="token operator">&lt;</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token operator">&gt;</span>

<span class="token comment">// 去除第一个元素后的数组</span>
type ShiftArr<span class="token operator">&lt;</span>Arr <span class="token keyword">extends</span> <span class="token class-name">unknown</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> <span class="token operator">=</span>
    Arr <span class="token keyword">extends</span> <span class="token punctuation">[</span>unknown<span class="token punctuation">,</span> <span class="token operator">...</span>infer newArr<span class="token punctuation">]</span> <span class="token operator">?</span> newArr <span class="token operator">:</span> never<span class="token punctuation">;</span>
type res5 <span class="token operator">=</span> ShiftArr<span class="token operator">&lt;</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token operator">&gt;</span>
</code></pre></div><h3 id="字符串相关操作"><a href="#字符串相关操作" class="header-anchor">#</a> 字符串相关操作</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 是否以某个字符开头</span>
type StartsWith<span class="token operator">&lt;</span>Str <span class="token keyword">extends</span> <span class="token class-name">string</span><span class="token punctuation">,</span> Prefix <span class="token keyword">extends</span> <span class="token class-name">string</span><span class="token operator">&gt;</span> <span class="token operator">=</span>
    Str <span class="token keyword">extends</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>Prefix<span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>string<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span> <span class="token operator">?</span> <span class="token boolean">true</span> <span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
type res6 <span class="token operator">=</span> StartsWith<span class="token operator">&lt;</span><span class="token string">'abcd'</span><span class="token punctuation">,</span> <span class="token string">'ab'</span><span class="token operator">&gt;</span>

<span class="token comment">// 替换字符</span>
type ReplaceStr<span class="token operator">&lt;</span>Str <span class="token keyword">extends</span> <span class="token class-name">string</span><span class="token punctuation">,</span> From <span class="token keyword">extends</span> <span class="token class-name">string</span><span class="token punctuation">,</span> To <span class="token keyword">extends</span> <span class="token class-name">string</span><span class="token operator">&gt;</span> <span class="token operator">=</span>
    Str <span class="token keyword">extends</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>infer Prefix<span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>From<span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>infer Suffix<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span> <span class="token operator">?</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>Prefix<span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>To<span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>Suffix<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span> <span class="token operator">:</span> Str
type res7 <span class="token operator">=</span> ReplaceStr<span class="token operator">&lt;</span><span class="token string">'abcd'</span><span class="token punctuation">,</span> <span class="token string">'bc'</span><span class="token punctuation">,</span> <span class="token string">'dd'</span><span class="token operator">&gt;</span>

<span class="token comment">// 去除右边的空格</span>
type TrimRight<span class="token operator">&lt;</span>Str <span class="token keyword">extends</span> <span class="token class-name">string</span><span class="token operator">&gt;</span> <span class="token operator">=</span>
    Str <span class="token keyword">extends</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>infer Last<span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token string">' '</span> <span class="token operator">|</span> <span class="token string">'\n'</span> <span class="token operator">|</span> <span class="token string">'\t'</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span> <span class="token operator">?</span> TrimRight<span class="token operator">&lt;</span>Last<span class="token operator">&gt;</span> <span class="token operator">:</span> Str
type res8 <span class="token operator">=</span> TrimRight<span class="token operator">&lt;</span><span class="token string">'abc  \n '</span><span class="token operator">&gt;</span>

<span class="token comment">// 去除左边的空格</span>
type TrimLeft<span class="token operator">&lt;</span>Str <span class="token keyword">extends</span> <span class="token class-name">string</span><span class="token operator">&gt;</span> <span class="token operator">=</span>
    Str <span class="token keyword">extends</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token string">' '</span> <span class="token operator">|</span> <span class="token string">'\n'</span> <span class="token operator">|</span> <span class="token string">'\t'</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>infer Last<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span> <span class="token operator">?</span> TrimLeft<span class="token operator">&lt;</span>Last<span class="token operator">&gt;</span> <span class="token operator">:</span> Str
type res9 <span class="token operator">=</span> TrimLeft<span class="token operator">&lt;</span><span class="token string">'  \n abc'</span><span class="token operator">&gt;</span>

<span class="token comment">// 去除左右两边空格</span>
type TrimStr<span class="token operator">&lt;</span>Str <span class="token keyword">extends</span> <span class="token class-name">string</span><span class="token operator">&gt;</span> <span class="token operator">=</span> TrimRight<span class="token operator">&lt;</span>TrimLeft<span class="token operator">&lt;</span>Str<span class="token operator">&gt;&gt;</span>
type TrimResult <span class="token operator">=</span> TrimStr<span class="token operator">&lt;</span><span class="token string">'   abc    '</span><span class="token operator">&gt;</span>
</code></pre></div><h3 id="函数"><a href="#函数" class="header-anchor">#</a> 函数</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 匹配函数参数</span>
type GetParameters<span class="token operator">&lt;</span>Func <span class="token keyword">extends</span> <span class="token class-name">Function</span><span class="token operator">&gt;</span> <span class="token operator">=</span>
    Func <span class="token keyword">extends</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args<span class="token operator">:</span> infer Args</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> unknown <span class="token operator">?</span> Args <span class="token operator">:</span> never

type res10 <span class="token operator">=</span> GetParameters<span class="token operator">&lt;</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">name</span><span class="token operator">:</span> string<span class="token punctuation">,</span> <span class="token literal-property property">age</span><span class="token operator">:</span> number</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> string<span class="token operator">&gt;</span>

<span class="token comment">// 获取函数返回值</span>
type GetReturnType<span class="token operator">&lt;</span>Func <span class="token keyword">extends</span> <span class="token class-name">Function</span><span class="token operator">&gt;</span> <span class="token operator">=</span>
    Func <span class="token keyword">extends</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args<span class="token operator">:</span> any<span class="token punctuation">[</span><span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> infer <span class="token constant">R</span> <span class="token operator">?</span> <span class="token constant">R</span> <span class="token operator">:</span> never
type res11 <span class="token operator">=</span> GetReturnType<span class="token operator">&lt;</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">name</span><span class="token operator">:</span> string<span class="token punctuation">,</span> <span class="token literal-property property">age</span><span class="token operator">:</span> number</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> string<span class="token operator">&gt;</span>

<span class="token keyword">interface</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> string
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">PersonConstructor</span> <span class="token punctuation">{</span>
    <span class="token keyword">new</span><span class="token punctuation">(</span>name<span class="token operator">:</span> string<span class="token punctuation">)</span><span class="token operator">:</span> Person
<span class="token punctuation">}</span>

<span class="token comment">// 获取构造函数this值</span>
type GetInstanceType<span class="token operator">&lt;</span>ConstructorType <span class="token keyword">extends</span> <span class="token class-name">new</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args<span class="token operator">:</span> any</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> any<span class="token operator">&gt;</span>
    <span class="token operator">=</span> ConstructorType <span class="token keyword">extends</span> <span class="token class-name">new</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args<span class="token operator">:</span> any</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> infer InstanceType <span class="token operator">?</span> InstanceType <span class="token operator">:</span> any<span class="token punctuation">;</span>

type GetInstanceTypeRes <span class="token operator">=</span> GetInstanceType<span class="token operator">&lt;</span>PersonConstructor<span class="token operator">&gt;</span>

<span class="token comment">// 获取构造函数参数</span>
type GetConstructorParameters<span class="token operator">&lt;</span>ConstructorType <span class="token keyword">extends</span> <span class="token class-name">new</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args<span class="token operator">:</span> any</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> any<span class="token operator">&gt;</span>
    <span class="token operator">=</span> ConstructorType <span class="token keyword">extends</span> <span class="token class-name">new</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args<span class="token operator">:</span> infer Args</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> any <span class="token operator">?</span> Args <span class="token operator">:</span> any
type GetConstructorParametersRes <span class="token operator">=</span> GetConstructorParameters<span class="token operator">&lt;</span>PersonConstructor<span class="token operator">&gt;</span>
</code></pre></div><h2 id="_2-重新构造做变换"><a href="#_2-重新构造做变换" class="header-anchor">#</a> 2. 重新构造做变换</h2> <p>声明任意类型的方式</p> <ol><li>type：类型别名</li> <li>infer：提取类型到变量</li> <li>类型参数： 范型</li></ol> <p>以上三种类型声明的变量都不能修改，如果要变换Chans新的类型需要重新构造。</p> <h3 id="数组类型"><a href="#数组类型" class="header-anchor">#</a> 数组类型</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 数组后添加元素</span>
type Push<span class="token operator">&lt;</span>Arr <span class="token keyword">extends</span> <span class="token class-name">unknown</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> Ele<span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span>Arr<span class="token punctuation">,</span> Ele<span class="token punctuation">]</span><span class="token punctuation">;</span>
type PushResult2 <span class="token operator">=</span> Push<span class="token operator">&lt;</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token operator">&gt;</span>

<span class="token comment">// 数组前添加元素</span>
type Unshift<span class="token operator">&lt;</span>Arr <span class="token keyword">extends</span> <span class="token class-name">unknown</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> Ele<span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">[</span>Ele<span class="token punctuation">,</span> <span class="token operator">...</span>Arr<span class="token punctuation">]</span><span class="token punctuation">;</span>
type UnshiftResult2 <span class="token operator">=</span> Unshift<span class="token operator">&lt;</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token operator">&gt;</span>

<span class="token comment">// 交叉合并数组</span>
type Zip2<span class="token operator">&lt;</span>One <span class="token keyword">extends</span> <span class="token class-name">unknown</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> other <span class="token keyword">extends</span> <span class="token class-name">unknown</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> <span class="token operator">=</span>
    One <span class="token keyword">extends</span> <span class="token punctuation">[</span>infer FirstOne<span class="token punctuation">,</span> <span class="token operator">...</span>infer FirstLast<span class="token punctuation">]</span>
        <span class="token operator">?</span> other <span class="token keyword">extends</span> <span class="token punctuation">[</span>infer OtherOne<span class="token punctuation">,</span> <span class="token operator">...</span>infer OtherLast<span class="token punctuation">]</span>
            <span class="token operator">?</span> <span class="token punctuation">[</span><span class="token punctuation">[</span>FirstOne<span class="token punctuation">,</span> OtherOne<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token operator">...</span>Zip2<span class="token operator">&lt;</span>FirstLast<span class="token punctuation">,</span> OtherLast<span class="token operator">&gt;</span><span class="token punctuation">]</span> <span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
                <span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>

type zip2Result2 <span class="token operator">=</span> Zip2<span class="token operator">&lt;</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">]</span><span class="token operator">&gt;</span>
</code></pre></div><h3 id="字符串"><a href="#字符串" class="header-anchor">#</a> 字符串</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 首字母大写</span>
type CapitalizeStr<span class="token operator">&lt;</span>Str <span class="token keyword">extends</span> <span class="token class-name">string</span><span class="token operator">&gt;</span> <span class="token operator">=</span>
    Str <span class="token keyword">extends</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>infer First<span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>infer Last<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span> <span class="token operator">?</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>Uppercase<span class="token operator">&lt;</span>First<span class="token operator">&gt;</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>Last<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">}</span><span class="token template-punctuation string">`</span></span> <span class="token operator">:</span> Str<span class="token punctuation">;</span>

<span class="token comment">// 下划线分隔的首字母大写</span>
type CamelCase<span class="token operator">&lt;</span>Str <span class="token keyword">extends</span> <span class="token class-name">string</span><span class="token operator">&gt;</span> <span class="token operator">=</span>
    Str <span class="token keyword">extends</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>infer Left<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">_</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>infer Right<span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>infer Rest<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
        <span class="token operator">?</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>Left<span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>Uppercase<span class="token operator">&lt;</span>Right<span class="token operator">&gt;</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>CamelCase<span class="token operator">&lt;</span>Rest<span class="token operator">&gt;</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span> <span class="token operator">:</span> Str
type CamelCaseRes <span class="token operator">=</span> CamelCase<span class="token operator">&lt;</span><span class="token string">'a_na_ya'</span><span class="token operator">&gt;</span>


<span class="token comment">// 删除某个字符</span>
type DropSubStr<span class="token operator">&lt;</span>Str <span class="token keyword">extends</span> <span class="token class-name">string</span><span class="token punctuation">,</span> SubStr <span class="token keyword">extends</span> <span class="token class-name">string</span><span class="token operator">&gt;</span>
    <span class="token operator">=</span> Str <span class="token keyword">extends</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>infer Left<span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>SubStr<span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>infer Right<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span> <span class="token operator">?</span> DropSubStr<span class="token operator">&lt;</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>Left<span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>Right<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> SubStr<span class="token operator">&gt;</span> <span class="token operator">:</span> Str<span class="token punctuation">;</span>
type DropSubStrRes <span class="token operator">=</span> DropSubStr<span class="token operator">&lt;</span><span class="token string">'abcdefbcg'</span><span class="token punctuation">,</span> <span class="token string">'bc'</span><span class="token operator">&gt;</span>
</code></pre></div><h3 id="函数-2"><a href="#函数-2" class="header-anchor">#</a> 函数</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 已有函数上添加一个参数</span>
type AppendArgument<span class="token operator">&lt;</span>Func <span class="token keyword">extends</span> <span class="token class-name">Function</span><span class="token punctuation">,</span> Arg<span class="token operator">&gt;</span> <span class="token operator">=</span>
    Func <span class="token keyword">extends</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args<span class="token operator">:</span> infer Args</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> infer <span class="token constant">R</span> <span class="token operator">?</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token operator">...</span>Args<span class="token punctuation">,</span> Arg<span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token constant">R</span> <span class="token operator">:</span> never
type AppendArgumentRes <span class="token operator">=</span> AppendArgument<span class="token operator">&lt;</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">a</span><span class="token operator">:</span> string</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> string<span class="token punctuation">,</span> number<span class="token operator">&gt;</span>
</code></pre></div><h3 id="索引类型"><a href="#索引类型" class="header-anchor">#</a> 索引类型</h3> <div class="language-js extra-class"><pre class="language-js"><code>type myRecord<span class="token operator">&lt;</span><span class="token constant">K</span> <span class="token keyword">extends</span> <span class="token class-name">string</span> <span class="token operator">|</span> number <span class="token operator">|</span> symbol<span class="token punctuation">,</span> <span class="token constant">T</span><span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">[</span><span class="token constant">P</span> <span class="token keyword">in</span> <span class="token constant">K</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">}</span>

<span class="token comment">// 索引类型的key变为大写</span>
type UppercaseKey<span class="token operator">&lt;</span>Obj <span class="token keyword">extends</span> <span class="token class-name">myRecord</span><span class="token operator">&lt;</span>string<span class="token punctuation">,</span> any<span class="token operator">&gt;&gt;</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token punctuation">[</span>Key <span class="token keyword">in</span> keyof Obj <span class="token keyword">as</span> Uppercase<span class="token operator">&lt;</span>Key <span class="token operator">&amp;</span> string<span class="token operator">&gt;</span><span class="token punctuation">]</span><span class="token operator">:</span> Obj<span class="token punctuation">[</span>Key<span class="token punctuation">]</span>
<span class="token punctuation">}</span>

type UppercaseKeyRes <span class="token operator">=</span> UppercaseKey<span class="token operator">&lt;</span><span class="token punctuation">{</span><span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token literal-property property">bb</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>

<span class="token comment">// 变可读</span>
type ToReadonly<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    readonly <span class="token punctuation">[</span>Key <span class="token keyword">in</span> keyof <span class="token constant">T</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">[</span>Key<span class="token punctuation">]</span>
<span class="token punctuation">}</span>

<span class="token comment">// 变可选</span>
type ToPartial<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token punctuation">[</span>Key <span class="token keyword">in</span> keyof <span class="token constant">T</span><span class="token punctuation">]</span><span class="token operator">?</span><span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">[</span>Key<span class="token punctuation">]</span>
<span class="token punctuation">}</span>

<span class="token comment">// 去掉readonly</span>
type ToMutable<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token operator">-</span>readonly <span class="token punctuation">[</span>Key <span class="token keyword">in</span> keyof <span class="token constant">T</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">[</span>Key<span class="token punctuation">]</span>
<span class="token punctuation">}</span>

<span class="token comment">// 变成必选</span>
type ToRequired<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token punctuation">[</span>Key <span class="token keyword">in</span> keyof <span class="token constant">T</span><span class="token punctuation">]</span><span class="token operator">-</span><span class="token operator">?</span><span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">[</span>Key<span class="token punctuation">]</span>
<span class="token punctuation">}</span>

<span class="token comment">// 对索引做修改的as叫做重映射</span>
type FilterByValueType<span class="token operator">&lt;</span>Obj <span class="token keyword">extends</span> <span class="token class-name">Record</span><span class="token operator">&lt;</span>string<span class="token punctuation">,</span> any<span class="token operator">&gt;</span><span class="token punctuation">,</span> ValueType<span class="token operator">&gt;</span> <span class="token operator">=</span>
    <span class="token punctuation">{</span>
        <span class="token punctuation">[</span>Key <span class="token keyword">in</span> keyof Obj <span class="token keyword">as</span> Obj<span class="token punctuation">[</span>Key<span class="token punctuation">]</span> <span class="token keyword">extends</span> <span class="token class-name">ValueType</span> <span class="token operator">?</span> Key <span class="token operator">:</span> never<span class="token punctuation">]</span> <span class="token operator">:</span> Obj<span class="token punctuation">[</span>Key<span class="token punctuation">]</span>
    <span class="token punctuation">}</span>

type FilterByValueTypeRes <span class="token operator">=</span> FilterByValueType<span class="token operator">&lt;</span><span class="token punctuation">{</span><span class="token literal-property property">a</span><span class="token operator">:</span> string<span class="token punctuation">,</span> <span class="token literal-property property">b</span><span class="token operator">:</span> number<span class="token punctuation">}</span><span class="token punctuation">,</span> string<span class="token operator">&gt;</span>
</code></pre></div><h2 id="_3-递归复用做循环"><a href="#_3-递归复用做循环" class="header-anchor">#</a> 3. 递归复用做循环</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 深层promise提取</span>
type DeepPromiseValueType<span class="token operator">&lt;</span><span class="token constant">P</span> <span class="token keyword">extends</span> <span class="token class-name">Promise</span><span class="token operator">&lt;</span>unknown<span class="token operator">&gt;&gt;</span> <span class="token operator">=</span>
    <span class="token constant">P</span> <span class="token keyword">extends</span> <span class="token class-name">Promise</span><span class="token operator">&lt;</span>infer valueType<span class="token operator">&gt;</span>
        <span class="token operator">?</span> valueType <span class="token keyword">extends</span> <span class="token class-name">Promise</span><span class="token operator">&lt;</span>unknown<span class="token operator">&gt;</span>
            <span class="token operator">?</span> DeepPromiseValueType<span class="token operator">&lt;</span>valueType<span class="token operator">&gt;</span>
            <span class="token operator">:</span> valueType
        <span class="token operator">:</span> never<span class="token punctuation">;</span>

type ttt <span class="token operator">=</span> Promise<span class="token operator">&lt;</span>Promise<span class="token operator">&lt;</span>Promise<span class="token operator">&lt;</span>Record<span class="token operator">&lt;</span>string<span class="token punctuation">,</span> any<span class="token operator">&gt;&gt;&gt;</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
type PromiseRes <span class="token operator">=</span> DeepPromiseValueType<span class="token operator">&lt;</span>ttt<span class="token operator">&gt;</span>

</code></pre></div><h3 id="数组"><a href="#数组" class="header-anchor">#</a> 数组</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 逆序数组</span>
type ReverseArr<span class="token operator">&lt;</span>Arr <span class="token keyword">extends</span> <span class="token class-name">unknown</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> <span class="token operator">=</span> 
    Arr <span class="token keyword">extends</span> <span class="token punctuation">[</span>infer One<span class="token punctuation">,</span> <span class="token operator">...</span>infer Other<span class="token punctuation">]</span> <span class="token operator">?</span> <span class="token punctuation">[</span><span class="token operator">...</span>ReverseArr<span class="token operator">&lt;</span>Other<span class="token operator">&gt;</span><span class="token punctuation">,</span> One<span class="token punctuation">]</span> <span class="token operator">:</span> Arr
type ReverseArrRes <span class="token operator">=</span> ReverseArr<span class="token operator">&lt;</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token operator">&gt;</span>

<span class="token comment">// 数组是否包含某个值</span>
type IsEqual<span class="token operator">&lt;</span><span class="token constant">A</span><span class="token punctuation">,</span> <span class="token constant">B</span><span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token constant">A</span> <span class="token keyword">extends</span> <span class="token class-name">B</span> <span class="token operator">?</span> <span class="token boolean">true</span> <span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span> <span class="token punctuation">(</span><span class="token constant">B</span> <span class="token keyword">extends</span> <span class="token class-name">A</span> <span class="token operator">?</span> <span class="token boolean">true</span> <span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
type Includes<span class="token operator">&lt;</span>Arr <span class="token keyword">extends</span> <span class="token class-name">unknown</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> FindItem<span class="token operator">&gt;</span> <span class="token operator">=</span> 
    Arr <span class="token keyword">extends</span> <span class="token punctuation">[</span>infer First<span class="token punctuation">,</span> <span class="token operator">...</span>infer Last<span class="token punctuation">]</span>
        <span class="token operator">?</span> IsEqual<span class="token operator">&lt;</span>First<span class="token punctuation">,</span> FindItem<span class="token operator">&gt;</span> <span class="token keyword">extends</span> <span class="token class-name">true</span> 
            <span class="token operator">?</span> <span class="token boolean">true</span> 
            <span class="token operator">:</span> Includes<span class="token operator">&lt;</span>Last<span class="token punctuation">,</span> FindItem<span class="token operator">&gt;</span>
        <span class="token operator">:</span> <span class="token boolean">false</span>
type IncludesRes <span class="token operator">=</span> Includes<span class="token operator">&lt;</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token operator">&gt;</span>

<span class="token comment">// 删除某个元素</span>
type RemoveItem<span class="token operator">&lt;</span>Arr <span class="token keyword">extends</span> <span class="token class-name">unknown</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> Item<span class="token punctuation">,</span> Result <span class="token keyword">extends</span> <span class="token class-name">unknown</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span>
    <span class="token operator">=</span> Arr <span class="token keyword">extends</span> <span class="token punctuation">[</span>infer First<span class="token punctuation">,</span> <span class="token operator">...</span>infer Rest<span class="token punctuation">]</span>
        <span class="token operator">?</span> IsEqual<span class="token operator">&lt;</span>First<span class="token punctuation">,</span> Item<span class="token operator">&gt;</span> <span class="token keyword">extends</span> <span class="token class-name">true</span> 
            <span class="token operator">?</span> RemoveItem<span class="token operator">&lt;</span>Rest<span class="token punctuation">,</span> Item<span class="token punctuation">,</span> Result<span class="token operator">&gt;</span>
            <span class="token operator">:</span> RemoveItem<span class="token operator">&lt;</span>Rest<span class="token punctuation">,</span> Item<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token operator">...</span>Result<span class="token punctuation">,</span> First<span class="token punctuation">]</span><span class="token operator">&gt;</span>
        <span class="token operator">:</span> Result
type RemoveItemResult <span class="token operator">=</span> RemoveItem<span class="token operator">&lt;</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token operator">&gt;</span>

<span class="token comment">// 构造指定类型数组</span>
type BuildArray<span class="token operator">&lt;</span>Length <span class="token keyword">extends</span> <span class="token class-name">number</span><span class="token punctuation">,</span> Ele <span class="token operator">=</span> unknown<span class="token punctuation">,</span> Arr <span class="token keyword">extends</span> <span class="token class-name">unknown</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span>
    <span class="token operator">=</span> Arr<span class="token punctuation">[</span><span class="token string">'length'</span><span class="token punctuation">]</span> <span class="token keyword">extends</span> <span class="token class-name">Length</span> <span class="token operator">?</span> Arr <span class="token operator">:</span> BuildArray<span class="token operator">&lt;</span>Length<span class="token punctuation">,</span> Ele<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token operator">...</span>Arr<span class="token punctuation">,</span> Ele<span class="token punctuation">]</span><span class="token operator">&gt;</span>
type BuildArrResult <span class="token operator">=</span> BuildArray<span class="token operator">&lt;</span><span class="token number">5</span><span class="token punctuation">,</span> string<span class="token operator">&gt;</span>
</code></pre></div><h3 id="字符串-2"><a href="#字符串-2" class="header-anchor">#</a> 字符串</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 替换字符</span>
type ReplaceAll<span class="token operator">&lt;</span>Str <span class="token keyword">extends</span> <span class="token class-name">string</span><span class="token punctuation">,</span> From <span class="token keyword">extends</span> <span class="token class-name">string</span><span class="token punctuation">,</span> To <span class="token keyword">extends</span> <span class="token class-name">string</span><span class="token operator">&gt;</span>
    <span class="token operator">=</span> Str <span class="token keyword">extends</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>infer Prefix<span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>From<span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>infer Suffix<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
        <span class="token operator">?</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>Prefix<span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>To<span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>ReplaceAll<span class="token operator">&lt;</span>Suffix<span class="token punctuation">,</span> From<span class="token punctuation">,</span> To<span class="token operator">&gt;</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span> <span class="token operator">:</span> Str<span class="token punctuation">;</span>
type replaceRes <span class="token operator">=</span> ReplaceAll<span class="token operator">&lt;</span><span class="token string">'dong dong dong'</span><span class="token punctuation">,</span> <span class="token string">'dong'</span><span class="token punctuation">,</span> <span class="token string">'xu'</span><span class="token operator">&gt;</span>

<span class="token comment">// 字符串转为联合类型</span>
type StringToUnion<span class="token operator">&lt;</span>Str <span class="token keyword">extends</span> <span class="token class-name">string</span><span class="token operator">&gt;</span> <span class="token operator">=</span>
    Str <span class="token keyword">extends</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>infer One<span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>infer Other<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span> <span class="token operator">?</span> One <span class="token operator">|</span> StringToUnion<span class="token operator">&lt;</span>Other<span class="token operator">&gt;</span> <span class="token operator">:</span> never
type StringToUnionRes <span class="token operator">=</span> StringToUnion<span class="token operator">&lt;</span><span class="token string">'hello world'</span><span class="token operator">&gt;</span>

type ReverseStr<span class="token operator">&lt;</span>Str <span class="token keyword">extends</span> <span class="token class-name">string</span><span class="token punctuation">,</span> Result <span class="token keyword">extends</span> <span class="token class-name">string</span> <span class="token operator">=</span> <span class="token string">''</span><span class="token operator">&gt;</span> <span class="token operator">=</span>
    Str <span class="token keyword">extends</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>infer First<span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>infer Last<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span> <span class="token operator">?</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>ReverseStr<span class="token operator">&lt;</span>Last<span class="token punctuation">,</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>First<span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>Result<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token operator">&gt;</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>First<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span> <span class="token operator">:</span> Result<span class="token punctuation">;</span>

type ReverseStrRes <span class="token operator">=</span> ReverseStr<span class="token operator">&lt;</span><span class="token string">'abcdefg'</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>

type ToReadonly<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    readonly <span class="token punctuation">[</span>Key <span class="token keyword">in</span> keyof <span class="token constant">T</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">[</span>Key<span class="token punctuation">]</span>
<span class="token punctuation">}</span>

type ReadonlyResult <span class="token operator">=</span> ToReadonly<span class="token operator">&lt;</span><span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> string<span class="token punctuation">;</span>
    <span class="token literal-property property">age</span><span class="token operator">:</span> number
<span class="token punctuation">}</span><span class="token operator">&gt;</span>
</code></pre></div><h3 id="对象"><a href="#对象" class="header-anchor">#</a> 对象</h3> <p>深层readonly，这个直接递归出来的结果不对，要加<code>Obj extends any</code>来触发计算，这样才能每个属性都加上readonly。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 需要加上Obj extends any触发计算才会在每个属性前面加上readonly</span>
type DeepReadonly<span class="token operator">&lt;</span>Obj <span class="token keyword">extends</span> <span class="token class-name">Record</span><span class="token operator">&lt;</span>string<span class="token punctuation">,</span> any<span class="token operator">&gt;&gt;</span> <span class="token operator">=</span> 
    Obj <span class="token keyword">extends</span> <span class="token class-name">any</span> <span class="token operator">?</span> <span class="token punctuation">{</span>
        readonly <span class="token punctuation">[</span>Key <span class="token keyword">in</span> keyof Obj<span class="token punctuation">]</span><span class="token operator">:</span> 
            Obj<span class="token punctuation">[</span>Key<span class="token punctuation">]</span> <span class="token keyword">extends</span> <span class="token class-name">Record</span><span class="token operator">&lt;</span>string<span class="token punctuation">,</span> any<span class="token operator">&gt;</span> <span class="token operator">?</span> DeepReadonly<span class="token operator">&lt;</span>Obj<span class="token punctuation">[</span>Key<span class="token punctuation">]</span><span class="token operator">&gt;</span> <span class="token operator">:</span> Obj<span class="token punctuation">[</span>Key<span class="token punctuation">]</span>
    <span class="token punctuation">}</span> <span class="token operator">:</span> never

type obj <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">b</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">c</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token function-variable function">f</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">'dong'</span><span class="token punctuation">,</span>
                <span class="token literal-property property">d</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                    <span class="token literal-property property">e</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                        <span class="token literal-property property">guang</span><span class="token operator">:</span> string
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

type DeepReadonlyRes <span class="token operator">=</span> DeepReadonly<span class="token operator">&lt;</span>obj<span class="token operator">&gt;</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="_4-数组长度做计数"><a href="#_4-数组长度做计数" class="header-anchor">#</a> 4. 数组长度做计数</h2> <p>太geek了，不明白这个的作用，不想写，暂时略过。。。</p> <h2 id="_5-联合分散可简化"><a href="#_5-联合分散可简化" class="header-anchor">#</a> 5. 联合分散可简化</h2> <p>当类型参数为联合类型，并且在条件类型左边直接引用该类型参数的时候，ts会把每个元素单独传入来做类型运算，最后再合并为联合类型，这种语法叫做分布式条件类型。</p> <p>啥意思呢，看demo</p> <div class="language-js extra-class"><pre class="language-js"><code>type Union <span class="token operator">=</span> <span class="token string">'a'</span> <span class="token operator">|</span> <span class="token string">'b'</span> <span class="token operator">|</span> <span class="token string">'c'</span><span class="token punctuation">;</span>

type UppercaseA<span class="token operator">&lt;</span>Item <span class="token keyword">extends</span> <span class="token class-name">string</span><span class="token operator">&gt;</span> <span class="token operator">=</span>
    Item <span class="token keyword">extends</span> <span class="token string">'a'</span> <span class="token operator">?</span> Uppercase<span class="token operator">&lt;</span>Item<span class="token operator">&gt;</span> <span class="token operator">:</span> Item<span class="token punctuation">;</span>

type result <span class="token operator">=</span> UppercaseA<span class="token operator">&lt;</span>Union<span class="token operator">&gt;</span><span class="token punctuation">;</span> <span class="token comment">// type result = &quot;b&quot; | &quot;c&quot; | &quot;A&quot;</span>

<span class="token comment">// 联合类型遇到字符串也会单独每个元素传入处理</span>
type str <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>Union<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">~~</span><span class="token template-punctuation string">`</span></span> <span class="token comment">// type str = &quot;a~~&quot; | &quot;b~~&quot; | &quot;c~~&quot;</span>

</code></pre></div><p>把联合类型的每一个元素单独传入做计算，然后将最后结果合并。</p> <p>之前对字符串_后的字符变为大写，如果是联合类型，则直接可以用，会将每一项单独处理。而如果参数是数组的话，就需要取出每一项单独处理了。</p> <div class="language-js extra-class"><pre class="language-js"><code>type CamelCase<span class="token operator">&lt;</span>Str <span class="token keyword">extends</span> <span class="token class-name">string</span><span class="token operator">&gt;</span> <span class="token operator">=</span>
    Str <span class="token keyword">extends</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>infer Left<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">_</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>infer Right<span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>infer Rest<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
        <span class="token operator">?</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>Left<span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>Uppercase<span class="token operator">&lt;</span>Right<span class="token operator">&gt;</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>CamelCase<span class="token operator">&lt;</span>Rest<span class="token operator">&gt;</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span> <span class="token operator">:</span> Str
type CamelCaseRes <span class="token operator">=</span> CamelCase<span class="token operator">&lt;</span><span class="token string">'a_na_ya'</span> <span class="token operator">|</span> <span class="token string">'bb_bb_bb'</span> <span class="token operator">|</span> <span class="token string">'cc_cc_cc'</span><span class="token operator">&gt;</span>

</code></pre></div><p>联合类型的判断，奇奇怪怪的判断，这个就需要单独记住了：</p> <ol><li>A extends A 这种写法是为了触发分布式条件类型，让每个类型单独传入处理</li> <li>A extends A 和 [A] extends [A] 是不同的处理，前者是单个类型和整个类型做判断，后者是两边都是整个联合类型，因为只有extends左边直接是类型参数才会触发分布式条件类型。</li></ol> <div class="language-js extra-class"><pre class="language-js"><code>type isUnion<span class="token operator">&lt;</span><span class="token constant">A</span><span class="token punctuation">,</span> <span class="token constant">B</span> <span class="token operator">=</span> <span class="token constant">A</span><span class="token operator">&gt;</span> <span class="token operator">=</span> 
    <span class="token constant">A</span> <span class="token keyword">extends</span> <span class="token class-name">A</span> <span class="token operator">?</span> <span class="token punctuation">[</span><span class="token constant">B</span><span class="token punctuation">]</span> <span class="token keyword">extends</span> <span class="token punctuation">[</span><span class="token constant">A</span><span class="token punctuation">]</span>
        <span class="token operator">?</span> <span class="token boolean">false</span>
        <span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token operator">:</span> never
</code></pre></div><p>数组转联合类型写法:</p> <div class="language-js extra-class"><pre class="language-js"><code>type union <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'aaa'</span><span class="token punctuation">,</span> <span class="token string">'bbb'</span><span class="token punctuation">]</span><span class="token punctuation">[</span>number<span class="token punctuation">]</span>
</code></pre></div><p>css类名bem生成：</p> <div class="language-js extra-class"><pre class="language-js"><code>type <span class="token constant">BEM</span><span class="token operator">&lt;</span>Block <span class="token keyword">extends</span> <span class="token class-name">string</span><span class="token punctuation">,</span> Element <span class="token keyword">extends</span> <span class="token class-name">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> Modifiers <span class="token keyword">extends</span> <span class="token class-name">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span>
    <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>Block<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">__</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>Element<span class="token punctuation">[</span>number<span class="token punctuation">]</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">--</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>Modifiers<span class="token punctuation">[</span>number<span class="token punctuation">]</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>

type bemResult <span class="token operator">=</span> <span class="token constant">BEM</span><span class="token operator">&lt;</span><span class="token string">'guang'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'aaa'</span><span class="token punctuation">,</span> <span class="token string">'bbb'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'warning'</span><span class="token punctuation">,</span> <span class="token string">'success'</span><span class="token punctuation">]</span><span class="token operator">&gt;</span>
</code></pre></div><p>返回所有组合类型</p> <div class="language-js extra-class"><pre class="language-js"><code>type Combination<span class="token operator">&lt;</span><span class="token constant">A</span> <span class="token keyword">extends</span> <span class="token class-name">string</span><span class="token punctuation">,</span> <span class="token constant">B</span> <span class="token keyword">extends</span> <span class="token class-name">string</span><span class="token operator">&gt;</span> <span class="token operator">=</span> 
 <span class="token operator">|</span> <span class="token constant">A</span>
 <span class="token operator">|</span> <span class="token constant">B</span>
 <span class="token operator">|</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">A</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">B</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
 <span class="token operator">|</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">B</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">A</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>

type AllCombinations<span class="token operator">&lt;</span><span class="token constant">A</span> <span class="token keyword">extends</span> <span class="token class-name">string</span><span class="token punctuation">,</span> <span class="token constant">B</span> <span class="token keyword">extends</span> <span class="token class-name">string</span> <span class="token operator">=</span> <span class="token constant">A</span><span class="token operator">&gt;</span> <span class="token operator">=</span>
    <span class="token constant">A</span> <span class="token keyword">extends</span> <span class="token class-name">A</span> <span class="token operator">?</span> Combination<span class="token operator">&lt;</span><span class="token constant">A</span><span class="token punctuation">,</span> AllCombinations<span class="token operator">&lt;</span>Exclude<span class="token operator">&lt;</span><span class="token constant">B</span><span class="token punctuation">,</span> <span class="token constant">A</span><span class="token operator">&gt;&gt;&gt;</span> <span class="token operator">:</span> never<span class="token punctuation">;</span>
</code></pre></div><h2 id="_6-特殊属性要记牢"><a href="#_6-特殊属性要记牢" class="header-anchor">#</a> 6. 特殊属性要记牢</h2> <p>这部分有的不太明白。首先是特殊类型的判断：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// any 类型与任何类型的交叉都是 any，也就是 1 &amp; any 结果是 any，可以用这个特性判断 any 类型</span>
type isAny<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token string">'xu'</span> <span class="token keyword">extends</span> <span class="token string">'lin'</span> <span class="token operator">&amp;</span> <span class="token constant">T</span> <span class="token operator">?</span> <span class="token boolean">true</span> <span class="token operator">:</span> <span class="token boolean">false</span>
type isAnyRes <span class="token operator">=</span> isAny<span class="token operator">&lt;</span>any<span class="token operator">&gt;</span>

type isEqual2<span class="token operator">&lt;</span><span class="token constant">A</span><span class="token punctuation">,</span> <span class="token constant">B</span><span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name">A</span> <span class="token operator">?</span> <span class="token number">1</span> <span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">extends</span> <span class="token punctuation">(</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name">B</span> <span class="token operator">?</span> <span class="token number">1</span> <span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token boolean">true</span> <span class="token operator">:</span> <span class="token boolean">false</span>

type isEqual2Res <span class="token operator">=</span> isEqual2<span class="token operator">&lt;</span><span class="token string">'1'</span><span class="token punctuation">,</span> any<span class="token operator">&gt;</span>

<span class="token comment">// 是否是联合类型</span>
type isUnion<span class="token operator">&lt;</span><span class="token constant">A</span><span class="token punctuation">,</span> <span class="token constant">B</span> <span class="token operator">=</span> <span class="token constant">A</span><span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token constant">A</span> <span class="token keyword">extends</span> <span class="token class-name">A</span>
    <span class="token operator">?</span> <span class="token punctuation">[</span><span class="token constant">A</span><span class="token punctuation">]</span> <span class="token keyword">extends</span> <span class="token punctuation">[</span><span class="token constant">B</span><span class="token punctuation">]</span> <span class="token operator">?</span> <span class="token boolean">false</span> <span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token operator">:</span> <span class="token boolean">false</span>
type isUnionRes <span class="token operator">=</span> isUnion<span class="token operator">&lt;</span><span class="token string">'a'</span> <span class="token operator">|</span> <span class="token string">'b'</span><span class="token operator">&gt;</span>

<span class="token comment">// 如果条件类型左边是类型参数，并且传入的是 never，那么直接返回 never</span>
type TestNever<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token constant">T</span><span class="token punctuation">]</span> <span class="token keyword">extends</span> <span class="token punctuation">[</span>number<span class="token punctuation">]</span> <span class="token operator">?</span> <span class="token boolean">true</span> <span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
type testNeverRes <span class="token operator">=</span> TestNever<span class="token operator">&lt;</span>never<span class="token operator">&gt;</span>

<span class="token comment">// 元祖类型的length是数字字面量，数组的length是number</span>
type len <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'length'</span><span class="token punctuation">]</span>
type len2 <span class="token operator">=</span> number<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'length'</span><span class="token punctuation">]</span>

type NotEqual<span class="token operator">&lt;</span><span class="token constant">A</span><span class="token punctuation">,</span> <span class="token constant">B</span><span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name">A</span> <span class="token operator">?</span> <span class="token number">1</span> <span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">extends</span> <span class="token punctuation">(</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name">B</span> <span class="token operator">?</span> <span class="token number">1</span> <span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token boolean">false</span> <span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span class="token comment">// 根据length类型判断是否是元组</span>
type isTuple<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token punctuation">[</span><span class="token operator">...</span>params<span class="token operator">:</span> infer Eles<span class="token punctuation">]</span>
    <span class="token operator">?</span> NotEqual<span class="token operator">&lt;</span>Eles<span class="token punctuation">[</span><span class="token string">'length'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> number<span class="token operator">&gt;</span>
    <span class="token operator">:</span> <span class="token boolean">false</span>
type isTupleRes <span class="token operator">=</span> isTuple<span class="token operator">&lt;</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">'3'</span><span class="token punctuation">]</span><span class="token operator">&gt;</span>
</code></pre></div><p>各种转，特殊属性</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 交叉转联合类型</span>
type UnionToIntersection<span class="token operator">&lt;</span><span class="token constant">U</span><span class="token operator">&gt;</span> <span class="token operator">=</span> 
    <span class="token punctuation">(</span><span class="token constant">U</span> <span class="token keyword">extends</span> <span class="token class-name">U</span> <span class="token operator">?</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">x</span><span class="token operator">:</span> <span class="token constant">U</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> unknown <span class="token operator">:</span> never<span class="token punctuation">)</span> <span class="token keyword">extends</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">x</span><span class="token operator">:</span> infer <span class="token constant">R</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> unknown
        <span class="token operator">?</span> <span class="token constant">R</span>
        <span class="token operator">:</span> never
type UnionToIntersectionRes <span class="token operator">=</span> UnionToIntersection<span class="token operator">&lt;</span><span class="token punctuation">{</span><span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">}</span> <span class="token operator">|</span> <span class="token punctuation">{</span><span class="token literal-property property">b</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>

<span class="token comment">// 利用 可选索引的值为 undefined 和值类型的联合类型。</span>
type GetOptional<span class="token operator">&lt;</span>Obj <span class="token keyword">extends</span> <span class="token class-name">Record</span><span class="token operator">&lt;</span>string<span class="token punctuation">,</span> any<span class="token operator">&gt;</span> <span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token punctuation">[</span>Key <span class="token keyword">in</span> keyof Obj <span class="token keyword">as</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token keyword">extends</span> <span class="token class-name">Pick</span><span class="token operator">&lt;</span>Obj<span class="token punctuation">,</span> Key<span class="token operator">&gt;</span> <span class="token operator">?</span> Key <span class="token operator">:</span> never <span class="token punctuation">]</span><span class="token operator">:</span> Obj<span class="token punctuation">[</span>Key<span class="token punctuation">]</span>
<span class="token punctuation">}</span>

type GetOptionalRes <span class="token operator">=</span> GetOptional<span class="token operator">&lt;</span><span class="token punctuation">{</span>
    <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    b<span class="token operator">?</span><span class="token operator">:</span> <span class="token number">2</span>
<span class="token punctuation">}</span><span class="token operator">&gt;</span>

type GetRequired<span class="token operator">&lt;</span>Obj <span class="token keyword">extends</span> <span class="token class-name">Record</span><span class="token operator">&lt;</span>string<span class="token punctuation">,</span> any<span class="token operator">&gt;</span> <span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token punctuation">[</span>Key <span class="token keyword">in</span> keyof Obj <span class="token keyword">as</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token keyword">extends</span> <span class="token class-name">Pick</span><span class="token operator">&lt;</span>Obj<span class="token punctuation">,</span> Key<span class="token operator">&gt;</span> <span class="token operator">?</span> never <span class="token operator">:</span> Key<span class="token punctuation">]</span><span class="token operator">:</span> Obj<span class="token punctuation">[</span>Key<span class="token punctuation">]</span>
<span class="token punctuation">}</span>
type GetRequiredRes <span class="token operator">=</span> GetRequired<span class="token operator">&lt;</span><span class="token punctuation">{</span>
    <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    b<span class="token operator">?</span><span class="token operator">:</span> <span class="token number">2</span>
<span class="token punctuation">}</span><span class="token operator">&gt;</span>

<span class="token comment">// 移除索引类型，索引签名不能构造成字符串字面量类型，因为它没有名字，而其他索引可以。</span>
type RemoveIndexSignature<span class="token operator">&lt;</span>Obj <span class="token keyword">extends</span> <span class="token class-name">Record</span><span class="token operator">&lt;</span>string<span class="token punctuation">,</span> any<span class="token operator">&gt;</span> <span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token punctuation">[</span>Key <span class="token keyword">in</span> keyof Obj 
        <span class="token keyword">as</span> Key <span class="token keyword">extends</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>infer Str<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span> <span class="token operator">?</span> Str <span class="token operator">:</span> never<span class="token punctuation">]</span><span class="token operator">:</span> Obj<span class="token punctuation">[</span>Key<span class="token punctuation">]</span>
<span class="token punctuation">}</span>
type RemoveIndexSignatureRes <span class="token operator">=</span> RemoveIndexSignature<span class="token operator">&lt;</span><span class="token punctuation">{</span><span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> b<span class="token operator">?</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>key<span class="token operator">:</span> string<span class="token punctuation">]</span><span class="token operator">:</span> any<span class="token punctuation">}</span><span class="token operator">&gt;</span>

<span class="token comment">// 过滤class的公共类型</span>
<span class="token keyword">class</span> <span class="token class-name">Dong</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token literal-property property">name</span><span class="token operator">:</span> string<span class="token punctuation">;</span>
    <span class="token keyword">protected</span> <span class="token literal-property property">age</span><span class="token operator">:</span> number<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token literal-property property">hobbies</span><span class="token operator">:</span> string<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'dong'</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>hobbies <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'sleep'</span><span class="token punctuation">,</span> <span class="token string">'eat'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token comment">// keyof 只能拿到 class 的 public 索引，private 和 protected 的索引会被忽略。</span>
type ClassPublicProps<span class="token operator">&lt;</span>Obj <span class="token keyword">extends</span> <span class="token class-name">Record</span><span class="token operator">&lt;</span>string<span class="token punctuation">,</span> any<span class="token operator">&gt;</span> <span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token punctuation">[</span>Key <span class="token keyword">in</span> keyof Obj<span class="token punctuation">]</span><span class="token operator">:</span> Obj<span class="token punctuation">[</span>Key<span class="token punctuation">]</span>
<span class="token punctuation">}</span>
type ClassPublicPropsRes <span class="token operator">=</span> ClassPublicProps<span class="token operator">&lt;</span>Dong<span class="token operator">&gt;</span>

<span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token literal-property property">b</span><span class="token operator">:</span> <span class="token number">2</span>
<span class="token punctuation">}</span> <span class="token keyword">as</span> <span class="token keyword">const</span>
</code></pre></div><p>这部分特殊属性包含，这可太多了，我是记不住===</p> <ul><li>any 类型与任何类型的交叉都是 any，也就是 1 &amp; any 结果是 any，可以用这个特性判断 any 类型。</li> <li>联合类型作为类型参数出现在条件类型左侧时，会分散成单个类型传入，最后合并。</li> <li>never 作为类型参数出现在条件类型左侧时，会直接返回 never。</li> <li>any 作为类型参数出现在条件类型左侧时，会直接返回 trueType 和 falseType 的联合类型。</li> <li>元组类型也是数组类型，但 length 是数字字面量，而数组的 length 是 number。可以用来判断元组类型。</li> <li>函数参数处会发生逆变，可以用来实现联合类型转交叉类型。</li> <li>可选索引的索引可能没有，那 Pick 出来的就可能是 {}，可以用来过滤可选索引，反过来也可以过滤非可选索引。</li> <li>索引类型的索引为字符串字面量类型，而可索引签名不是，可以用这个特性过滤掉可索引签名。</li> <li>keyof 只能拿到 class 的 public 的索引，可以用来过滤出 public 的属性。</li> <li>默认推导出来的不是字面量类型，加上 as const 可以推导出字面量类型，但带有 readonly 修饰，这样模式匹配的时候也得加上 readonly 才行。</li></ul> <h1 id="四、内置高级类型"><a href="#四、内置高级类型" class="header-anchor">#</a> 四、内置高级类型</h1> <p>这部分感觉最重要，即使上面的不掌握，这部分是要掌握的，也是可能出现在面试题里的。下面写常见的高级ts类型。</p> <p>下面主要是通过infer提取参数：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 提取parameters</span>
type myParameters<span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args<span class="token operator">:</span> any</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> any<span class="token operator">&gt;</span> <span class="token operator">=</span> 
    <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args<span class="token operator">:</span> infer Args</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> any <span class="token operator">?</span> Args <span class="token operator">:</span> never

type ParametersRes <span class="token operator">=</span> myParameters<span class="token operator">&lt;</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">name</span><span class="token operator">:</span> string<span class="token punctuation">,</span> <span class="token literal-property property">age</span><span class="token operator">:</span> number</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>

<span class="token comment">// 提取函数返回值</span>

type myReturnType<span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args<span class="token operator">:</span> any</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> any<span class="token operator">&gt;</span> <span class="token operator">=</span> 
    <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args<span class="token operator">:</span> any</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> infer <span class="token constant">R</span> <span class="token operator">?</span> <span class="token constant">R</span> <span class="token operator">:</span> never<span class="token punctuation">;</span>

type ReturnRes <span class="token operator">=</span> myReturnType<span class="token operator">&lt;</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">name</span><span class="token operator">:</span> string<span class="token punctuation">,</span> <span class="token literal-property property">age</span><span class="token operator">:</span> number</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>

<span class="token comment">// 提取构造函数的参数值</span>
type myConstructorParameters<span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name">new</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args<span class="token operator">:</span> any</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> any<span class="token operator">&gt;</span> <span class="token operator">=</span>
    <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name">new</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args<span class="token operator">:</span> infer Args</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> any <span class="token operator">?</span> Args <span class="token operator">:</span> never

<span class="token keyword">interface</span> <span class="token class-name">PersonConstructor</span> <span class="token punctuation">{</span>
    <span class="token keyword">new</span><span class="token punctuation">(</span>name<span class="token operator">:</span> string<span class="token punctuation">)</span><span class="token operator">:</span> Person
<span class="token punctuation">}</span>

type myConstructorParametersRes <span class="token operator">=</span> myConstructorParameters<span class="token operator">&lt;</span>PersonConstructor<span class="token operator">&gt;</span>

<span class="token comment">// 提取构造函数的instanceType，就是构造函数的返回值</span>
type myInstanceType<span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name">new</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args<span class="token operator">:</span> any</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> any<span class="token operator">&gt;</span> <span class="token operator">=</span>
    <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name">new</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> infer <span class="token constant">R</span> <span class="token operator">?</span> <span class="token constant">R</span> <span class="token operator">:</span> never
type myInstanceTypeRes <span class="token operator">=</span> myInstanceType<span class="token operator">&lt;</span>PersonConstructor<span class="token operator">&gt;</span>
</code></pre></div><p>接下来类型变换的，这部分估计用的最多，考的也最多，<strong>敲重点了</strong>！！！：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 变可选</span>
type myPartial<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token punctuation">[</span><span class="token constant">P</span> <span class="token keyword">in</span> keyof <span class="token constant">T</span><span class="token punctuation">]</span><span class="token operator">?</span><span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">P</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
type PartialRes <span class="token operator">=</span> Partial<span class="token operator">&lt;</span><span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'dong'</span><span class="token punctuation">,</span> <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">18</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>

type myRequired<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token punctuation">[</span><span class="token constant">P</span> <span class="token keyword">in</span> keyof <span class="token constant">T</span><span class="token punctuation">]</span><span class="token operator">-</span><span class="token operator">?</span><span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">P</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>

type myReadonly<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    readonly <span class="token punctuation">[</span><span class="token constant">P</span> <span class="token keyword">in</span> keyof <span class="token constant">T</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">P</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>

type myPick<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">K</span> <span class="token keyword">extends</span> <span class="token class-name">keyof</span> <span class="token constant">T</span><span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token punctuation">[</span><span class="token constant">P</span> <span class="token keyword">in</span> <span class="token constant">K</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">P</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>

type PickRes <span class="token operator">=</span> Pick<span class="token operator">&lt;</span><span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'dong'</span><span class="token punctuation">,</span> <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">18</span><span class="token punctuation">,</span> <span class="token literal-property property">sex</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">'name'</span> <span class="token operator">|</span> <span class="token string">'age'</span><span class="token operator">&gt;</span>

type myRecord<span class="token operator">&lt;</span><span class="token constant">K</span> <span class="token keyword">extends</span> <span class="token class-name">keyof</span> any<span class="token punctuation">,</span> <span class="token constant">T</span><span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token punctuation">[</span><span class="token constant">P</span> <span class="token keyword">in</span> <span class="token constant">K</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token constant">T</span>
<span class="token punctuation">}</span>

type RecordRes <span class="token operator">=</span> Record<span class="token operator">&lt;</span><span class="token string">'a'</span> <span class="token operator">|</span> <span class="token string">'b'</span><span class="token punctuation">,</span> number<span class="token operator">&gt;</span>

type myExclude<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">U</span><span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name">U</span> <span class="token operator">?</span> never <span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">;</span>

type myExcludeRes <span class="token operator">=</span> myExclude<span class="token operator">&lt;</span><span class="token string">'1'</span><span class="token operator">|</span><span class="token string">'2'</span><span class="token operator">|</span><span class="token string">'3'</span><span class="token punctuation">,</span> <span class="token string">'1'</span> <span class="token operator">|</span> <span class="token string">'2'</span><span class="token operator">&gt;</span>

type myExtract<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">U</span><span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name">U</span> <span class="token operator">?</span> <span class="token constant">T</span> <span class="token operator">:</span> never<span class="token punctuation">;</span>

type myExtractRes <span class="token operator">=</span> myExtract<span class="token operator">&lt;</span><span class="token string">'1'</span><span class="token operator">|</span><span class="token string">'2'</span><span class="token operator">|</span><span class="token string">'3'</span><span class="token punctuation">,</span> <span class="token string">'1'</span> <span class="token operator">|</span> <span class="token string">'2'</span><span class="token operator">&gt;</span>

type myOmit<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">K</span> <span class="token keyword">extends</span> <span class="token class-name">keyof</span> <span class="token constant">T</span><span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token punctuation">[</span><span class="token constant">P</span> <span class="token keyword">in</span> Exclude<span class="token operator">&lt;</span>keyof <span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">K</span><span class="token operator">&gt;</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">P</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>

type myOmitRes <span class="token operator">=</span> myOmit<span class="token operator">&lt;</span><span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'dong'</span><span class="token punctuation">,</span> <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">18</span><span class="token punctuation">,</span> <span class="token literal-property property">sex</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">'name'</span> <span class="token operator">|</span> <span class="token string">'age'</span><span class="token operator">&gt;</span>

type Awaited<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span> <span class="token operator">=</span>
    <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name">null</span> <span class="token operator">|</span> <span class="token keyword">undefined</span>
        <span class="token operator">?</span> <span class="token constant">T</span> 
        <span class="token operator">:</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name">object</span> <span class="token operator">&amp;</span> <span class="token punctuation">{</span> <span class="token function">then</span><span class="token punctuation">(</span>onfulfilled<span class="token operator">:</span> infer <span class="token constant">F</span><span class="token punctuation">)</span><span class="token operator">:</span> any <span class="token punctuation">}</span>
            <span class="token operator">?</span> <span class="token constant">F</span> <span class="token keyword">extends</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">value</span><span class="token operator">:</span> infer <span class="token constant">V</span><span class="token punctuation">,</span> <span class="token operator">...</span>args<span class="token operator">:</span> any</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> any<span class="token punctuation">)</span>
                <span class="token operator">?</span> Awaited<span class="token operator">&lt;</span><span class="token constant">V</span><span class="token operator">&gt;</span>
                <span class="token operator">:</span> never 
            <span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">;</span>

type myAwaited<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span> <span class="token operator">=</span> 
    <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name">null</span> <span class="token operator">|</span> <span class="token keyword">undefined</span>
        <span class="token operator">?</span> <span class="token constant">T</span>
        <span class="token operator">:</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name">object</span> <span class="token operator">&amp;</span> <span class="token punctuation">{</span> <span class="token function">then</span><span class="token punctuation">(</span>onfulfilled<span class="token operator">:</span> infer <span class="token constant">F</span><span class="token punctuation">)</span><span class="token operator">:</span> any<span class="token punctuation">}</span>
            <span class="token operator">?</span> <span class="token constant">F</span> <span class="token keyword">extends</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">value</span><span class="token operator">:</span> infer <span class="token constant">V</span><span class="token punctuation">,</span> <span class="token operator">...</span>args<span class="token operator">:</span> any</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> any<span class="token punctuation">)</span>
                <span class="token operator">?</span> Awaited<span class="token operator">&lt;</span><span class="token constant">V</span><span class="token operator">&gt;</span>
                <span class="token operator">:</span> never<span class="token punctuation">;</span>

type myNonNullable<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name">undefined</span> <span class="token operator">|</span> <span class="token keyword">null</span> <span class="token operator">?</span> never <span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">;</span>
type myNonNullableRes <span class="token operator">=</span> myNonNullable<span class="token operator">&lt;</span>string<span class="token operator">&gt;</span>
</code></pre></div><h1 id="五、资料"><a href="#五、资料" class="header-anchor">#</a> 五、资料</h1> <p>哈哈，下面是bing的回答：</p> <p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/da47c76870974df08b6a8ce078a26360~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=1510&amp;h=796&amp;s=514801&amp;e=png&amp;b=f9f8fa" alt="image.png"></p> <p>给出的资料还是挺不错的：</p> <ul><li><a href="https://juejin.cn/post/6999280101556748295" target="_blank" rel="noopener noreferrer">TypeScript 类型体操姿势合集&lt;通关总结&gt;–刷完<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>：这篇文章介绍了一些常见的ts类型体操的题目和解法，以及一些姿势总结。</li> <li><a href="https://juejin.cn/post/7077464587313872932" target="_blank" rel="noopener noreferrer">TypeScript类型体操训练（一）<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>：这篇文章是一个系列的第一部分，介绍了如何使用Type Challenges仓库来进行ts类型体操的训练。</li> <li><a href="https://www.zhihu.com/question/528403706" target="_blank" rel="noopener noreferrer">为什么 TypeScript 会有「类型体操」？<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>：这篇文章解释了ts类型体操的原理和意义，以及它和值空间编程的区别。</li> <li><a href="https://github.com/qc-z/type-challenges" target="_blank" rel="noopener noreferrer">GitHub - qc-z/type-challenges: typescript 类型体操<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>：这是一个GitHub仓库，收集了一些ts类型体操的题目和解答，你可以fork或者clone来自己尝试。</li></ul> <p>我再加一个：</p> <p><a href="https://blog.maxiaobo.com.cn/type-challenge/dist/" target="_blank" rel="noopener noreferrer">TS 类型挑战通关手册<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>总算写的差不多了，学习ts的过程并不快乐，不是舒适区，几度不想写，不想看，但总算写完了，接下来几天不想看ts了。。。😓</p></div></section> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev"><a href="/learn-js/" class="prev router-link-active">
          学前必读
        </a></span> <span class="next"><a href="/learn-js/handbook/webpack.html">
          从4个方面重新梳理webpack
        </a></span></p></div> <div class="comments-wrapper"><!----></div></main></div> <!----></div> <ul class="sub-sidebar sub-sidebar-wrapper" style="width:12rem;" data-v-b57cc07c data-v-7dd95ae2><li class="level-2" data-v-b57cc07c><a href="/learn-js/handbook/ts.html#接口" class="sidebar-link reco-side-接口" data-v-b57cc07c>接口</a></li><li class="level-3" data-v-b57cc07c><a href="/learn-js/handbook/ts.html#函数的两种声明方式" class="sidebar-link reco-side-函数的两种声明方式" data-v-b57cc07c>函数的两种声明方式</a></li><li class="level-3" data-v-b57cc07c><a href="/learn-js/handbook/ts.html#构造函数声明" class="sidebar-link reco-side-构造函数声明" data-v-b57cc07c>构造函数声明</a></li><li class="level-2" data-v-b57cc07c><a href="/learn-js/handbook/ts.html#_1-模式匹配做提取-infer" class="sidebar-link reco-side-_1-模式匹配做提取-infer" data-v-b57cc07c>1. 模式匹配做提取 infer</a></li><li class="level-3" data-v-b57cc07c><a href="/learn-js/handbook/ts.html#数组相关操作" class="sidebar-link reco-side-数组相关操作" data-v-b57cc07c>数组相关操作</a></li><li class="level-3" data-v-b57cc07c><a href="/learn-js/handbook/ts.html#字符串相关操作" class="sidebar-link reco-side-字符串相关操作" data-v-b57cc07c>字符串相关操作</a></li><li class="level-3" data-v-b57cc07c><a href="/learn-js/handbook/ts.html#函数" class="sidebar-link reco-side-函数" data-v-b57cc07c>函数</a></li><li class="level-2" data-v-b57cc07c><a href="/learn-js/handbook/ts.html#_2-重新构造做变换" class="sidebar-link reco-side-_2-重新构造做变换" data-v-b57cc07c>2. 重新构造做变换</a></li><li class="level-3" data-v-b57cc07c><a href="/learn-js/handbook/ts.html#数组类型" class="sidebar-link reco-side-数组类型" data-v-b57cc07c>数组类型</a></li><li class="level-3" data-v-b57cc07c><a href="/learn-js/handbook/ts.html#字符串" class="sidebar-link reco-side-字符串" data-v-b57cc07c>字符串</a></li><li class="level-3" data-v-b57cc07c><a href="/learn-js/handbook/ts.html#函数-2" class="sidebar-link reco-side-函数-2" data-v-b57cc07c>函数</a></li><li class="level-3" data-v-b57cc07c><a href="/learn-js/handbook/ts.html#索引类型" class="sidebar-link reco-side-索引类型" data-v-b57cc07c>索引类型</a></li><li class="level-2" data-v-b57cc07c><a href="/learn-js/handbook/ts.html#_3-递归复用做循环" class="sidebar-link reco-side-_3-递归复用做循环" data-v-b57cc07c>3. 递归复用做循环</a></li><li class="level-3" data-v-b57cc07c><a href="/learn-js/handbook/ts.html#数组" class="sidebar-link reco-side-数组" data-v-b57cc07c>数组</a></li><li class="level-3" data-v-b57cc07c><a href="/learn-js/handbook/ts.html#字符串-2" class="sidebar-link reco-side-字符串-2" data-v-b57cc07c>字符串</a></li><li class="level-3" data-v-b57cc07c><a href="/learn-js/handbook/ts.html#对象" class="sidebar-link reco-side-对象" data-v-b57cc07c>对象</a></li><li class="level-2" data-v-b57cc07c><a href="/learn-js/handbook/ts.html#_4-数组长度做计数" class="sidebar-link reco-side-_4-数组长度做计数" data-v-b57cc07c>4. 数组长度做计数</a></li><li class="level-2" data-v-b57cc07c><a href="/learn-js/handbook/ts.html#_5-联合分散可简化" class="sidebar-link reco-side-_5-联合分散可简化" data-v-b57cc07c>5. 联合分散可简化</a></li><li class="level-2" data-v-b57cc07c><a href="/learn-js/handbook/ts.html#_6-特殊属性要记牢" class="sidebar-link reco-side-_6-特殊属性要记牢" data-v-b57cc07c>6. 特殊属性要记牢</a></li></ul></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div></div></div>
    <script src="/learn-js/assets/js/app.4d00eb80.js" defer></script><script src="/learn-js/assets/js/7.7c04b33d.js" defer></script><script src="/learn-js/assets/js/2.0a9283b3.js" defer></script><script src="/learn-js/assets/js/1.9a3fba6f.js" defer></script><script src="/learn-js/assets/js/40.3006ef82.js" defer></script>
  </body>
</html>
